"use strict";angular.module("descentCampaignTrackerApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","LocalStorageModule","pascalprecht.translate"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/saveAndLoad",{templateUrl:"views/saveandload.html",controller:"SaveandloadCtrl",controllerAs:"saveAndLoad"}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl",controllerAs:"settings"}).otherwise({redirectTo:"/"})}]).config(["localStorageServiceProvider",function(a){a.setPrefix("desCT")}]).config(["$translateProvider",function(a){a.determinePreferredLanguage()}]).run(["$translate","desSettings",function(a,b){var c=b.loadModel().appLang;a.use(c)}]),function(a,b){a.module("descentCampaignTrackerApp").controller("MainCtrl",["$scope","localStorageService","desCamaignCons","desModel","desOverlord","desLieutenant","desMonster","desHero","desLocation","desCampaign",function(c,d,e,f,g,h,i,j,k,l){function m(){u.addInputs.plotUpgrade=t(u.addInputs.plotUpgrade,g.addPlotUpgrade.bind(b,f.getOverlord()),g.newUpgrade)}function n(){u.addInputs.commonUpgrade=t(u.addInputs.commonUpgrade,g.addCommonUpgrade.bind(b,f.getOverlord()),g.newUpgrade)}function o(){u.addInputs.lieutenant=t(u.addInputs.lieutenant,h.addLieutenant.bind(b,f.getLieutenants()),h.newLieutenant)}function p(){u.addInputs.hero=t(u.addInputs.hero,j.addHero.bind(b,f.getHeroParty()),j.newHero)}function q(){u.addInputs.city=t(u.addInputs.city,k.addCity.bind(b,f.getLocations()),k.newCity)}function r(){u.addInputs.dungeon=t(u.addInputs.dungeon,k.addDungeon.bind(b,f.getLocations()),k.newDungeon)}function s(){u.addInputs.island=t(u.addInputs.island,k.addIsland.bind(b,f.getLocations()),k.newIsland)}function t(b,c,d){return b&&a.isDefined(b.name)&&a.isString(b.name)&&b.name.length>0?(c(b),d()):b}var u=this;u.cons={campaign:e},u.model=f.getModel(),u.addInputs={plotUpgrade:g.newUpgrade(),commonUpgrade:g.newUpgrade(),lieutenant:h.newLieutenant(),hero:j.newHero(),city:k.newCity(),island:k.newIsland(),dungeon:k.newDungeon()},u.api={addPlotUpgrade:m,removePlotUpgrade:g.removePlotUpgrade.bind(b,f.getOverlord()),addCommonUpgrade:n,removeCommonUpgrade:g.removeCommonUpgrade.bind(b,f.getOverlord()),addLieutenant:o,removeLieutenant:h.removeLieutenant.bind(b,f.getLieutenants()),modifyMonsterLevel:i.modifyMonsterLevel,addOverlordConquestTockens:g.addOverlordConquestTockens.bind(b,f.getOverlord()),addOverlordSpentTockens:g.addOverlordSpentTockens.bind(b,f.getOverlord()),overlordAviableConquestTockens:g.overlordAviableConquestTockens.bind(b,f.getOverlord()),increaseCurrentTreachery:g.increaseCurrentTreachery,increaseMaxTreachery:g.increaseMaxTreachery,addHero:p,removeHero:j.removeHero.bind(b,f.getHeroParty()),addHeroesConquestTockens:j.addHeroesConquestTockens.bind(b,f.getHeroParty()),addSpentHeroXP:j.addSpentHeroXP.bind(b,f.getHeroParty()),xpAviableHero:j.xpAviableHero.bind(b,f.getHeroParty()),addCity:q,removeCity:k.removeCity.bind(b,f.getLocations()),addCitySiegeTocken:k.addCitySiegeTocken,toggleCityRazed:k.toggleCityRazed,cityState:k.cityState,adventureLocationState:k.adventureLocationState,addDungeon:r,removeDungeon:k.removeDungeon.bind(b,f.getLocations()),addIsland:s,removeIsland:k.removeIsland.bind(b,f.getLocations()),toggleAdvLocVisited:k.toggleAdvLocVisited,toggleAdvLocConquered:k.toggleAdvLocConquered,toggleAdvLocFailed:k.toggleAdvLocFailed,divineFavor:l.divineFavor.bind(b,f.getOverlord(),f.getHeroParty()),totalCampaignTockens:l.totalCampaignTockens.bind(b,f.getOverlord(),f.getHeroParty()),campaignLevel:l.campaignLevel.bind(b,f.getOverlord(),f.getHeroParty())},c.model=u.model,c.$watch("model",function(){f.saveModel()},!0)}])}(angular),angular.module("descentCampaignTrackerApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("descentCampaignTrackerApp").factory("desModel",["$log","$translate","localStorageService","desCamaignCons","desCore","desModelControl","desOverlord","desLieutenant","desMonster","desHero","desLocation",function(a,b,c,d,e,f,g,h,i,j,k){function l(){return y}function m(){var b=c.get(d.LOCAL_STORAGE_NAME);try{v(b)}catch(e){a.error("Error loading model from local storage: "+e),a.error(b),a.error("Loading new model instance instead"),b=x()}return b}function n(){c.set(d.LOCAL_STORAGE_NAME,y)}function o(){return y.overlord}function p(){return y.lieutenants}function q(){return y.monsterLevels}function r(){return y.heroParty}function s(){return y.locations}function t(){return angular.toJson(y,2)}function u(c){var d,e={success:!1,text:null},g=x();try{if(d=angular.fromJson(c),angular.isObject(d)){if(angular.isUndefined(d.control)){var h=f.newControl(0,0);d.control=h}v(d),angular.extend(g,d),y=g,e.success=!0,e.text=b.instant("CAMPAIGN_IMPORT_OK")}else angular.isUndefined(e.text)&&(e.text=b.instant("INPUT_TEXT_IS_NOT_JSON"))}catch(i){a.error("Error convirtiendo entrada en JSON: "+i),e.success=!1,e.text=b.instant("CONVERSION_ERROR")+": "+i.message}return e}function v(c){var e;if(e=angular.isUndefined(c.control)||angular.isUndefined(c.control.version)?0:c.control.version,!f.isValidModelVersion(e))throw b.instant("INVALID_MODEL_VERSION");if(!f.isCurrentVersion(e)){a.debug("Old model version detected. Init version: "+e+", currentVersion: "+d.CURRENT_MODEL_VERSION);for(var g=[w],h=e;h<g.length;h++)g[h](c)}}function w(b){function c(a,b){var c=b.filter(function(b){return a===b.name});return angular.isDefined(c)&&angular.isArray(c)?c[0]:void 0}if(a.debug("Updating model from version 0 to 1"),b.control=f.newControl(0,1),angular.isDefined(b.monsterLevels)){var e=[{name:"Humanoides",type:d.MONSTER_TYPE_HUMANOID},{name:"Bestias",type:d.MONSTER_TYPE_BEASTS},{name:"Arcanos",type:d.MONSTER_TYPE_ELDRITCH}];angular.forEach(e,function(a,d){var e=c(a.name,b.monsterLevels);if(angular.isDefined(e)&&angular.isObject(e)){var f=i.newMonsterLevel(a.type,e.level||1);b.monsterLevels[d]=f}else b.monsterLevels.push(i.newMonsterLevel(a.type))})}a.debug("successfully updated to version 1")}function x(){return{control:f.newControlLatestVersion(),overlord:g.newOverlord(),lieutenants:h.newLieutenants(),monsterLevels:i.newMonsterLevels(),heroParty:j.newHeroParty(),locations:k.newLocations()}}var y=m()||x();return{getModel:l,loadModel:m,saveModel:n,getOverlord:o,getLieutenants:p,getMonsterLevels:q,getHeroParty:r,getLocations:s,toJSON:t,fromJSON:u}}]),angular.module("descentCampaignTrackerApp").filter("rgtDesMonsterLevel",["$translate",function(a){return function(b){var c=b.level||1,d="LEVEL_CUPPER";switch(c){case 2:d="LEVEL_SILVER";break;case 3:d="LEVEL_GOLD";break;case 4:d="LEVEL_DIAMOND";break;default:d="LEVEL_CUPPER"}return a.instant(d)}}]),angular.module("descentCampaignTrackerApp").factory("desTreachery",[function(){function a(){return{current:0,max:0}}function b(a,b){var c=a.current||0,d=a.max||0,e=c+(b||0);d>=e&&e>=0&&(a.current=e)}function c(a,b){var c=a.current||0,d=(a.max||0)+(b||0);d>=0&&d>=c&&(a.max=d)}return{newTreacheryCounter:a,increaseCurrentTreachery:b,increaseMaxTreachery:c}}]),angular.module("descentCampaignTrackerApp").constant("desCamaignCons",{LOCAL_STORAGE_NAME:"descentCampaign",LOCAL_STORAGE_SETTINGS:"descentCampaignSettings",MAX_HERO_PARTY_SIZE:4,DIVINE_FACTOR_DIFFERENCE:25,SILVER_THRESHOLD:200,GOLD_THRESHOLD:400,FINAL_BATTLE_THRESHOLD:600,CURRENT_MODEL_VERSION:1,MONSTER_TYPE_HUMANOID:"H",MONSTER_TYPE_BEASTS:"B",MONSTER_TYPE_ELDRITCH:"E"}),angular.module("descentCampaignTrackerApp").factory("desCore",["$filter",function(a){function b(b,c){return b=b||[],b.push(c),a("orderBy")(b,"name",!1)}function c(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return a()+a(!0)+a(!0)+a()}return{newUid:c,orderAndAddNamedItemToArray:b}}]),angular.module("descentCampaignTrackerApp").factory("desHero",["desCore",function(a){function b(){return{location:"",homePort:"",rumor:{name:"",location:""},heroes:[],conquestTockens:0}}function c(){return{name:"",xpSpent:null}}function d(b,c){c.xpSpent=Math.max(0,c.xpSpent||0),b.heroes=a.orderAndAddNamedItemToArray(b.heroes,c)}function e(a,b){a.heroes.splice(b,1)}function f(a,b,c){var d=(b.xpSpent||0)+(c||0),e=a.conquestTockens||0;d>=0&&e>=d&&(b.xpSpent=d)}function g(a,b){return(a.conquestTockens||0)-(b.xpSpent||0)}function h(a,b){var c=(a.conquestTockens||0)+(b||0);c>=0&&(a.conquestTockens=c)}return{newHeroParty:b,newHero:c,addHero:d,removeHero:e,addSpentHeroXP:f,xpAviableHero:g,addHeroesConquestTockens:h}}]),angular.module("descentCampaignTrackerApp").factory("desLocation",["desCore",function(a){function b(){return{cities:[],dungeons:[],islands:[]}}function c(a){return{name:"",type:a}}function d(){var a=angular.extend({},c("C"));return a.siege=0,a.vault="",a.razed=!1,a}function e(){var a=angular.extend({},c("A"));return a.visited=!1,a.conquered=!1,a.failed=!1,a}function f(){var a=e();return a.levels=["",""],a}function g(){var a=e();return a.levels=["","",""],a}function h(b,c){c.siege=Math.max(0,c.siege||0),b.cities=a.orderAndAddNamedItemToArray(b.cities,c)}function i(a,b){a.cities.splice(b,1)}function j(a,b){var c=(a.siege||0)+(b||0);c>=0&&(a.siege=c)}function k(a){a.razed=!a.razed}function l(a){var b;return b=angular.isUndefined(a)||!angular.isObject(a)?"UNKNOWN":a.razed?"RAZED":0===a.siege?"FREE":a.siege>0?"SIEGED":"UNKNOWN"}function m(a){var b;return b=angular.isUndefined(a)||!angular.isObject(a)?"LOCATION_UNKNOWN":a.visited?a.conquered||a.failed?a.conquered?"LOCATION_CONQUERED":a.failed?"LOCATION_DEFEAT":"LOCATION_UNKNOWN":"LOCATION_VISITED":"LOCATION_UNKNOWN"}function n(b,c){b.dungeons=a.orderAndAddNamedItemToArray(b.dungeons,c)}function o(a,b){a.dungeons.splice(b,1)}function p(b,c){b.islands=a.orderAndAddNamedItemToArray(b.islands,c)}function q(a,b){a.islands.splice(b,1)}function r(a,b){a.conquered||a.failed||(a.visited=b)}function s(a,b){a.visited&&!a.failed&&(a.conquered=b)}function t(a,b){a.visited&&!a.conquered&&(a.failed=b)}return{newLocations:b,newCity:d,addCity:h,removeCity:i,addCitySiegeTocken:j,toggleCityRazed:k,cityState:l,adventureLocationState:m,newDungeon:g,addDungeon:n,removeDungeon:o,newIsland:f,addIsland:p,removeIsland:q,toggleAdvLocVisited:r,toggleAdvLocConquered:s,toggleAdvLocFailed:t}}]),angular.module("descentCampaignTrackerApp").factory("desOverlord",["desCore","desOverlordUpgrade","desTreachery",function(a,b,c){function d(){return{name:"",plot:"",plotUpgrades:[],commonUpgrades:[],conquestTockens:0,spentTockens:0,treachery:{traps:c.newTreacheryCounter(),events:c.newTreacheryCounter(),monsters:c.newTreacheryCounter()}}}function e(a,b){var c=(a.conquestTockens||0)+(b||0);c>=0&&(a.conquestTockens=c)}function f(a,b){var c=(a.spentTockens||0)+(b||0),d=a.conquestTockens||0;c>=0&&d>=c&&(a.spentTockens=c)}function g(a){return(a.conquestTockens||0)-(a.spentTockens||0)}return{newOverlord:d,newUpgrade:b.newUpgrade,addPlotUpgrade:b.addPlotUpgrade,removePlotUpgrade:b.removePlotUpgrade,addCommonUpgrade:b.addCommonUpgrade,removeCommonUpgrade:b.removeCommonUpgrade,addOverlordConquestTockens:e,addOverlordSpentTockens:f,overlordAviableConquestTockens:g,increaseCurrentTreachery:c.increaseCurrentTreachery,increaseMaxTreachery:c.increaseMaxTreachery}}]),angular.module("descentCampaignTrackerApp").factory("desLieutenant",["desCore",function(a){function b(){return{list:[]}}function c(){return{name:"",location:"",alive:!0}}function d(b,c){b.list=a.orderAndAddNamedItemToArray(b.list,c)}function e(a,b){a.list.splice(b,1)}return{newLieutenants:b,newLieutenant:c,addLieutenant:d,removeLieutenant:e}}]),angular.module("descentCampaignTrackerApp").factory("desMonster",["desCamaignCons",function(a){function b(a,b){return{type:a,level:b||1}}function c(){return[b(a.MONSTER_TYPE_HUMANOID,1),b(a.MONSTER_TYPE_BEASTS,1),b(a.MONSTER_TYPE_ELDRITCH,1)]}function d(a,b){var c=a.level||1,d=c+b;d>=1&&4>=d&&(a.level=d)}return{newMonsterLevel:b,newMonsterLevels:c,modifyMonsterLevel:d}}]),angular.module("descentCampaignTrackerApp").factory("desOverlordUpgrade",["desCore",function(a){function b(){return{name:""}}function c(a,b){a.splice(b,1)}function d(b,c){b.plotUpgrades=a.orderAndAddNamedItemToArray(b.plotUpgrades,c)}function e(a,b){c(a.plotUpgrades,b)}function f(b,c){b.commonUpgrades=a.orderAndAddNamedItemToArray(b.commonUpgrades,c)}function g(a,b){c(a.commonUpgrades,b)}return{newUpgrade:b,addPlotUpgrade:d,removePlotUpgrade:e,addCommonUpgrade:f,removeCommonUpgrade:g}}]),angular.module("descentCampaignTrackerApp").factory("desCampaign",["$translate","desCamaignCons",function(a,b){function c(a,c){var d=a.conquestTockens||0,e=c.conquestTockens||0,f=Math.abs(d-e),g=1;d>e&&(g=-1);var h=Math.floor(f/b.DIVINE_FACTOR_DIFFERENCE)*g;return h}function d(a,b){var c=b.conquestTockens||0,d=a.conquestTockens||0;return c+d}function e(c,e){var f="LEVEL_CUPPER",g=d(c,e);return g>=b.SILVER_THRESHOLD?f="LEVEL_SILVER":g>=b.GOLD_THRESHOLD?f="LEVEL_GOLD":g>=b.FINAL_BATTLE_THRESHOLD&&(f="LEVEL_GOLD_FINAL_BATTLE"),a.instant(f)}return{divineFavor:c,totalCampaignTockens:d,campaignLevel:e}}]),angular.module("descentCampaignTrackerApp").controller("SaveandloadCtrl",["desModel",function(a){function b(){e.model.output=a.toJSON()}function c(){e.model.importResult=a.fromJSON(e.model.input),e.model.showImportMessage=!0}function d(){e.model.output="toObsidianPortalWiki"}var e=this;e.model={output:"",input:"",showImportMessage:!1,importResult:{},campaignModel:a.getModel()},e.api={toJSON:b,fromJSON:c,toObsidianPortalWiki:d}}]),angular.module("descentCampaignTrackerApp").factory("desModelControl",["desCamaignCons",function(a){function b(b,c){var d,e;return d=angular.isUndefined(b)?0:b,e=angular.isUndefined(c)?a.CURRENT_MODEL_VERSION:c,{version:e,originVersion:d}}function c(a,b){a.originVersion=b}function d(b){return angular.isDefined(b)&&angular.isNumber(b)&&b<=a.CURRENT_MODEL_VERSION}function e(b){return angular.isDefined(b)&&angular.isNumber(b)&&b===a.CURRENT_MODEL_VERSION}return{newControl:b,newControlLatestVersion:b.bind(void 0,a.CURRENT_MODEL_VERSION,a.CURRENT_MODEL_VERSION),setOriginVersion:c,isValidModelVersion:d,isCurrentVersion:e}}]),angular.module("descentCampaignTrackerApp").directive("desRedClothCampaignModel",["$log","desModel","desCampaign",function(a,b,c){return{templateUrl:"templates/desredclothcampaignmodel.html",restrict:"E",replace:!0,scope:{model:"="},link:function(d){a.log(d.model),d.api={divineFavor:c.divineFavor.bind(void 0,b.getOverlord(),b.getHeroParty()),totalCampaignTockens:c.totalCampaignTockens.bind(void 0,b.getOverlord(),b.getHeroParty()),campaignLevel:c.campaignLevel.bind(void 0,b.getOverlord(),b.getHeroParty())}}}}]),function(a){a.config(["$translateProvider",function(a){a.translations("es",{UNKNOWN:"Desconocido",TITLE:"Campaña",SAVE_AND_LOAD:"Guardar y cargar",SETTINGS:"Preferencias",ABOUT:"Acerca de",SHORT_APP_DESCRIPTION:'Una hoja de campaña sencilla para la campaña de Descent "El Mar de Sangre"',ACTIONS:"Acciones",ADD:"Agregar",DELETE:"Eliminar",VIEW:"Ver",SAVE:"Guardar",LOCATION:"Localización",STATE:"Estado",NAME:"Nombre",OVERLORD:"Señor supremo",OVERLORD_NAME:"Nombre del señor supremo",PLOT:"Trama",UPGRADES:"Avances",PLOT_UPGRADES:"Avances de trama",PLOT_UPGRADE:"Avance de trama",ADD_PLOT_UPGRADE:"Agregar avance de trama",DELETE_PLOT_UPGRADE:"Eliminar avance de trama",COMMON_UPGRADES:"Avances comunes",COMMON_UPGRADE:"Avance común",ADD_COMMON_UPGRADE:"Agregar avance común",DELETE_COMMON_UPGRADE:"Eliminar avance común",LIEUTENANTS:"Lugartenientes",LIEUTENANT:"Lugarteniente",LIEUTENANT_NAME:"Nombre del lugarteniente",ADD_LIEUTENANT:"Agregar lugarteniente",DELETE_LIEUTENANT:"Eliminar lugarteniente",HEROES:"Héroes",HERO_NAME:"Nombre del héroe",XP:"XP",HERO_XP_SPENT:"XP gastados",ADD_HERO:"Agregar héroe",DELETE_HERO:"Eliminar héroe",HOME_PORT:"Puerto seguro",PARTY_LOCATION:"Localización actual del grupo",RUMOR:"Rumor",CURRENT_RUMOR:"Rumor activo",RUMOR_LOCATION:"Localización del rumor",CONQUEST_TOCKENS:"Fichas de conquista",CAMPAIGN_TOTAL_CONQUEST_TOCKENS:"Total campaña",LEVEL:"Nivel",CAMPAIGN_LEVEL:"Nivel de campaña",LEVEL_CUPPER:"Cobre",LEVEL_SILVER:"Plata",LEVEL_GOLD:"Oro",LEVEL_GOLD_FINAL_BATTLE:"Oro - Batalla final",LEVEL_DIAMOND:"Diamante",DIVINE_FAVOR:"Favor divino",LEVEL_MONSTERS:"Nivel de los monstruos",HUMANOIDS:"Humanoides",BEASTS:"Bestias",ELDRITCH:"Arcanos",MONSTER_TYPE_UNKNOWN:"Tipo de monstruo desconocido",CITIES:"Ciudades",CITY:"Ciudad",CITY_NAME:"Nombre de la ciudad",SIEGE:"Asedio",SIEGE_TOCKENS:"Marcadores de asedio",VAULT:"Bóveda",ADD_CITY:"Agregar ciudad",RAZE_CITY:"Arrasar ciudad",RESTORE_CITY:"Restaurar ciudad",DELETE_CITY:"Eliminar ciudad",FREE:"Libre",SIEGED:"Bajo asedio",RAZED:"Arrasada",ISLANDS:"Islas",ISLAND_NAME:"Nombre de la isla",ADD_ISLAND:"Agregar isla",ACTIONS_OVER_ISLAND:"Acciones sobre la isla",DELETE_ISLAND:"Eliminar isla",DUNGEONS:"Mazmorras",DUNGEON:"Mazmorra",DUNGEON_NAME:"Nombe de la mazmorra",ADD_DUNGEON:"Agregar mazmorra",DELETE_DUNGEON:"Eliminar dungeon",ACTIONS_OVER_DUNGEON:"Actions over the dungeon",LOCATION_UNKNOWN:"Desconocida",LOCATION_VISITED:"Visitada",LOCATION_CONQUERED:"Conquistada",LOCATION_DEFEAT:"Derrota",RESTORE_NOT_VISITED:"Restaurar a no visitada",RESTORE_NOT_CONQUERED:"Restaurar a no conquistada",RESTORE_NOT_DEFEAT:"Restaurar a no derrota",TREACHERY:"Perfidia",TRAP_TREACHERY:"Perfidia de trampas",EVENT_TREACHERY:"Perfidia de eventos",MONSTER_TREACHERY:"Perfidia de monstruos",SAVE_AND_LOAD_TITLE:"Guardar y cargar la campaña",EXPORT_CAMPAIGN:"Exportar campaña",EXPORT_CAMPAIGN_DESCRIPTION:"Con esta opción puedes exportar la campaña en formato JSON y más tarde podrás volver a cargarla.",IMPORT_CAMPAIGN:"Importar campaña",IMPORT_CAMPAIGN_DESCRIPTION:"Aquí puedes introducir una campaña que hayas guardado previamente en formato JSON. Al pulsar el botón, si el JSON es correcto, se cargarán los datos en la pantalla pricipal. Esta acción no se puede deshacer, tenlo en cuenta.",TO_JSON:"A JSON",FROM_JSON:"Desde JSON",CAMPAIGN_IMPORT_OK:"Campaña importada correctamente.",INPUT_TEXT_IS_NOT_JSON:"La entrada no es un texto JSON correcto",CONVERSION_ERROR:"Error de conversión",INVALID_MODEL_VERSION:"Número de versión de modelo incorrecta",ABOUT_DESCRIPTION:'Este es una sencilla hoja de campaña para la campaña "El mar de sangre" de la primera edición de Descent. Si quieres contributir puedes participar o sugerir mejoras en la página del proyecto en ',LANGUAGE:"Idioma",SPANISH:"Castellano",ENGLISH:"Inglés"})}])}(angular.module("descentCampaignTrackerApp")),function(a){a.config(["$translateProvider",function(a){a.translations("en",{UNKNOWN:"Unknown",TITLE:"Campaign",SAVE_AND_LOAD:"Save and load",SETTINGS:"Settings",ABOUT:"About",SHORT_APP_DESCRIPTION:'A simple Descent "The Sea of Blood" campaign tracker',ACTIONS:"Actions",ADD:"Add",DELETE:"Delete",VIEW:"Vew",SAVE:"Save",LOCATION:"Location",STATE:"State",NAME:"Name",OVERLORD:"Overlord",OVERLORD_NAME:"Overlord name",PLOT:"Plot",UPGRADES:"Upgrades",PLOT_UPGRADES:"Plot upgrades",PLOT_UPGRADE:"Plot upgrade",ADD_PLOT_UPGRADE:"Add plot upgrade",DELETE_PLOT_UPGRADE:"Delete plot upgrade",COMMON_UPGRADES:"Common upgrades",COMMON_UPGRADE:"Common upgrade",ADD_COMMON_UPGRADE:"Add common upgrade",DELETE_COMMON_UPGRADE:"Delete common upgrade",LIEUTENANTS:"Lieutenants",LIEUTENANT:"Lieutenant",LIEUTENANT_NAME:"Lieutenant name",ADD_LIEUTENANT:"Add lieutenant",DELETE_LIEUTENANT:"Delete lieutenant",HEROES:"Heroes",HERO_NAME:"Hero name",XP:"XP",HERO_XP_SPENT:"XP spent",ADD_HERO:"Add hero",DELETE_HERO:"Delete hero",HOME_PORT:"Home port",PARTY_LOCATION:"Hero party location",RUMOR:"Rumor",CURRENT_RUMOR:"Current rumor",RUMOR_LOCATION:"Rumor location",CONQUEST_TOCKENS:"Conquest tockens",CAMPAIGN_TOTAL_CONQUEST_TOCKENS:"Campaign total conquest tockens",LEVEL:"Level",CAMPAIGN_LEVEL:"Campaign level",LEVEL_CUPPER:"Cupper",LEVEL_SILVER:"Silver",LEVEL_GOLD:"Gold",LEVEL_GOLD_FINAL_BATTLE:"Gold - Final battle",LEVEL_DIAMOND:"Diamond",DIVINE_FAVOR:"Divine favor",LEVEL_MONSTERS:"Level monsters",HUMANOIDS:"Humanoids",BEASTS:"Beasts",ELDRITCH:"Eldritch",MONSTER_TYPE_UNKNOWN:"Monster type unknown",CITIES:"Cities",CITY:"City",CITY_NAME:"City name",SIEGE:"Siege",SIEGE_TOCKENS:"Siege tockens",VAULT:"Vault",ADD_CITY:"Add city",RAZE_CITY:"Raze city",RESTORE_CITY:"Restore city",DELETE_CITY:"Delete city",FREE:"Free",SIEGED:"Sieged",RAZED:"Razed",ISLANDS:"Islands",ISLAND_NAME:"Island name",ADD_ISLAND:"Add island",ACTIONS_OVER_ISLAND:"Actions over the island",DELETE_ISLAND:"Delete island",DUNGEONS:"Dungeons",DUNGEON:"Dungeon",DUNGEON_NAME:"Dungeon name",ADD_DUNGEON:"Add dungeon",DELETE_DUNGEON:"Delete dungeon",ACTIONS_OVER_DUNGEON:"Actions over the dungeon",LOCATION_UNKNOWN:"Unknown",LOCATION_VISITED:"Visited",LOCATION_CONQUERED:"Conquered",LOCATION_DEFEAT:"Defeat",RESTORE_NOT_VISITED:"Restore to not visited",RESTORE_NOT_CONQUERED:"Restore to not conquered",RESTORE_NOT_DEFEAT:"Restore to not defeat",TREACHERY:"Treachery",TRAP_TREACHERY:"Trap treachery",EVENT_TREACHERY:"Event treachery",MONSTER_TREACHERY:"Monster treachery",SAVE_AND_LOAD_TITLE:"Save and load the campaign",EXPORT_CAMPAIGN:"Export campaign",EXPORT_CAMPAIGN_DESCRIPTION:"With this option you can export the campaign in JSON format and later you will be able to reload it.",IMPORT_CAMPAIGN:"Import campaign",IMPORT_CAMPAIGN_DESCRIPTION:"You can enter a campaign you have previously saved in JSON format. Pressing the button, if the JSON is correct, the campaign data will be loaded into the pricipal screen. This action can not be undone, keep that in mind.",TO_JSON:"To JSON",FROM_JSON:"From JSON",CAMPAIGN_IMPORT_OK:"Campaign imported properly.",INPUT_TEXT_IS_NOT_JSON:"Input text is not a valid JSON file",CONVERSION_ERROR:"Conversion error",INVALID_MODEL_VERSION:"Invalid model version",ABOUT_DESCRIPTION:'This is a simple campaigning sheet for the campaign "Sea of Blood" for Descent, first edition. If you want to contribute you can participate or suggest improvements (may be better or new translations) in the eproject\'s site at ',LANGUAGE:"Language",SPANISH:"Spanish",ENGLISH:"English"})}])}(angular.module("descentCampaignTrackerApp")),angular.module("descentCampaignTrackerApp").filter("rgtDesMonsterTypeName",["$translate","desCamaignCons",function(a,b){return function(c){var d;switch(c){case b.MONSTER_TYPE_HUMANOID:d="HUMANOIDS";break;case b.MONSTER_TYPE_BEASTS:d="BEASTS";break;case b.MONSTER_TYPE_ELDRITCH:d="ELDRITCH";break;default:d="MONSTER_TYPE_UNKNOWN"}return a.instant(d)}}]),angular.module("descentCampaignTrackerApp").filter("desCityStateClass",["desLocation",function(a){return function(b){var c,d=a.cityState(b);switch(d){case"RAZED":c="label-danger";break;case"SIEGED":c="label-warning";break;case"FREE":case"UNKNOWN":c="label-success"}return c}}]),angular.module("descentCampaignTrackerApp").filter("desAdventureLocationStateClass",["desLocation",function(a){return function(b){var c,d=a.adventureLocationState(b);switch(d){case"LOCATION_DEFEAT":c="label-danger";break;case"LOCATION_VISITED":c="label-primary";break;case"LOCATION_CONQUERED":c="label-success";break;case"LOCATION_UNKNOWN":c="label-default"}return c}}]),angular.module("descentCampaignTrackerApp").controller("SettingsCtrl",["$scope","$translate","desSettings",function(a,b,c){function d(){b.use(e.model.selectedLanguage),c.setPreferredLanguage(e.model.selectedLanguage)}var e=this;e.model={languages:[{id:"es",description:"SPANISH"},{id:"en",description:"ENGLISH"}],selectedLanguage:c.getPreferredLanguage()},e.api={setAppLang:d},a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("descentCampaignTrackerApp").provider("desSettings",[function(){return{$get:["localStorageService","desCamaignCons",function(a,b){function c(){return k.model}function d(){return k.model=a.get(b.LOCAL_STORAGE_SETTINGS)||j(),k.model}function e(){a.set(b.LOCAL_STORAGE_SETTINGS,k.model)}function f(){return{languages:[{id:"es",description:"SPANISH"},{id:"en",description:"ENGLISH"}]}}function g(a){var b=f().languages,c=b.filter(function(b){return a===b.id});return angular.isDefined(c)&&angular.isArray(c)&&angular.isObject(c[0])}function h(){return d(),k.model.appLang}function i(a){k.model.appLang=a,e()}function j(){return{version:0,appLang:"es"}}var k=this;return k.model={},{getLanguagesList:f,loadModel:d,saveModel:e,getModel:c,isValidLanguage:g,getPreferredLanguage:h,setPreferredLanguage:i}}]}}]);